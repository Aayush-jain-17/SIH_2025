<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HydroBots | Calculate</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap');

    :root {
      --primary-color: #2D6A6B;
      --secondary-color: #5AA1A3;
      --light-bg-color: #D3E0E2;
      --dark-bg-color: #1A3E3F;
      --text-color: #fff;
      --bg: var(--light-bg-color);
      --card: #ffffff;
      --muted: #5b6770;
      --radius: 12px;
      --container: 1200px;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      --gap: 18px;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--bg);
      color: #333;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* HEADER */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--primary-color);
      padding: 1rem 2rem;
      color: white;
    }

    .header .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-img {
      width: 46px;
      height: 46px;
      object-fit: contain;
    }

    .header .logo h2 {
      font-size: 1.6rem;
      color: #fff;
      font-weight: 700;
    }

    .navbar a {
      margin: 0 1rem;
      text-decoration: none;
      color: white;
      font-weight: 500;
    }

    .navbar a.active {
      border-bottom: 2px solid white;
    }

    /* MAIN CONTAINER */
    .main-container {
      display: flex;
      max-width: var(--container);
      margin: 2rem auto;
      gap: var(--gap);
      padding: 0 1rem;
    }

    /* CARDS */
    .form-card, .results-card {
      flex: 1;
      background: var(--card);
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    h1, h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      color: var(--dark-bg-color);
    }
    
    .results-card h2 {
      margin-bottom: 2rem;
    }

    label {
      display: block;
      margin-top: 0.8rem;
      font-weight: 600;
      color: #1A3E3F;
    }

    input, select {
      width: 100%;
      padding: 0.6rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
      color: #333;
    }

    .btn {
      width: 100%;
      margin-top: 1.2rem;
      padding: 0.8rem;
      background: var(--primary-color);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn:hover {
      background: var(--secondary-color);
    }

    .results-card {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .result-values {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .result-box {
      background: var(--light-bg-color);
      border-radius: 8px;
      padding: 1rem;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
      color: var(--dark-bg-color);
    }

    .extra-info {
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      font-size: 0.95rem;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
      color: #555;
    }

    .chart-container {
      margin-top: 1rem;
      background: #fff;
      padding: 0.5rem;
      border-radius: 8px;
    }
    
    /* Responsive styles */
    @media (max-width: 900px) {
      .main-container {
        flex-direction: column;
      }
      .header {
        flex-direction: column;
        text-align: center;
        padding: 1rem;
      }
      .navbar {
        margin-top: 1rem;
      }
      .navbar a {
        margin: 0 0.5rem;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <img src="logo.png" alt="HydroBots Logo" class="logo-img">
      <h2>HydroBots</h2>
    </div>
    <nav class="navbar">
  <a href="index.html">Home</a>
  <a href="dashboard.html">Dashboard</a>
  <a href="calculate.html" class="active">Calculate</a>
  <a href="add-property.html">Add Property</a>
  <a href="rainfall.html">Fetch Rainfall</a>

</nav>

  </header>

  <div class="main-container">
    <div class="form-card">
      <h1>Calculate Water Potential</h1>
      <form id="calculateForm">
        <label for="roofArea">Roof Area (sq.m):</label>
        <input type="number" id="roofArea" placeholder="Enter roof area" required>

        <label for="dwellers">Number of Dwellers:</label>
        <input type="number" id="dwellers" placeholder="Enter number of people" required>

        <label for="openSpace">Available Open Space (sq.m):</label>
        <input type="number" id="openSpace" placeholder="Enter open space area" required>

        <label for="location">Select Location:</label>
        <select id="location" required>
          <option value="">--Choose Location--</option>
          <option value="Mumbai">Mumbai</option>
          <option value="Delhi">Delhi</option>
          <option value="Ahmedabad">Ahmedabad</option>
          <option value="Kolkata">Kolkata</option>
        </select>

        <label for="structureType">Preferred Structure:</label>
        <select id="structureType" required>
          <option value="">--Select Structure--</option>
          <option value="Recharge Pit">Recharge Pit</option>
          <option value="Recharge Trench">Recharge Trench</option>
          <option value="Storage Tank">Storage Tank</option>
        </select>

        <button type="submit" class="btn">Calculate</button>
      </form>
    </div>

    <div class="results-card">
      <h2>Results</h2>
      <div class="result-values">
        <div class="result-box" id="harvestResult">0 L</div>
        <div class="result-box" id="supportResult">0 People</div>
      </div>
      <div class="extra-info" id="dimensionInfo">
        Recommended Dimensions: –
      </div>
      <div class="extra-info" id="costInfo">
        Estimated Cost: –
      </div>
      <div class="chart-container">
        <canvas id="resultChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    const ctx = document.getElementById("resultChart").getContext("2d");
    let resultChart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["Harvest Volume (L)", "Supportable Dwellers"],
        datasets: [{
          label: "Estimates",
          data: [0, 0],
          backgroundColor: ["#2D6A6B", "#5AA1A3"]
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false } },
        scales: { y: { beginAtZero: true } }
      }
    });

    document.getElementById("calculateForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const roofArea = parseFloat(document.getElementById("roofArea").value);
      const dwellers = parseInt(document.getElementById("dwellers").value);
      const structureType = document.getElementById("structureType").value;

      const totalWater = roofArea * 0.8 * 600; // 80% runoff & 600 mm rainfall

      let efficiency = 1;
      let dimensions = "";
      let cost = 0;

      if (structureType === "Recharge Pit") {
        efficiency = 0.85;
        dimensions = "1.2m × 1.2m × 2m pit";
        cost = totalWater * 0.05;
      } else if (structureType === "Recharge Trench") {
        efficiency = 0.75;
        dimensions = "5m × 1m × 1.5m trench";
        cost = totalWater * 0.04;
      } else if (structureType === "Storage Tank") {
        efficiency = 0.95;
        dimensions = "Underground tank with 10,000L capacity";
        cost = totalWater * 0.08;
      }

      const usableWater = totalWater * efficiency;

      document.getElementById("harvestResult").textContent = `${usableWater.toFixed(0)} L`;
      document.getElementById("supportResult").textContent = `${dwellers} People`;
      document.getElementById("dimensionInfo").textContent = `Recommended Dimensions: ${dimensions}`;
      document.getElementById("costInfo").textContent = `Estimated Cost: ₹${cost.toFixed(0)}`;

      resultChart.data.datasets[0].data = [usableWater, dwellers];
      resultChart.update();
    });
  </script>
</body>
</html>